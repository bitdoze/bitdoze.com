---
import Layout from "@layouts/Layout.astro";
import ResourceCard from "@layouts/components/widgets/ResourceCard.astro";
import resourcesData from "@config/resources.json";
import { siteConfig } from "@config/site";

const { resources } = resourcesData;

// Group resources by category
const groupedResources = resources.reduce((acc, resource) => {
  const category = resource.category;
  if (!acc[category]) {
    acc[category] = [];
  }
  acc[category].push(resource);
  return acc;
}, {} as Record<string, typeof resources>);

// Sort categories alphabetically
const sortedCategories = Object.keys(groupedResources).sort();

const title = "Recommended Resources & Tools";
const description = "Discover hand-picked tools and services that power our work. Get exclusive deals and free credits on the best cloud hosting, development tools, email marketing platforms, and more.";
---

<Layout
  title={title}
  description={description}
  hreflangs={[
    { lang: "en", href: `${Astro.site || siteConfig.url}/resources/` },
    { lang: "es", href: `${Astro.site || siteConfig.url}/es/resources/` },
    { lang: "x-default", href: `${Astro.site || siteConfig.url}/resources/` },
  ]}
>
  <!-- Hero Section -->
  <section class="py-12 bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
          {title}
        </h1>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
          {description}
        </p>
      </div>
    </div>
  </section>

  <!-- Resources Section -->
  <section class="py-12 bg-white dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      {sortedCategories.map((category) => (
        <div class="mb-16 last:mb-0">
          <!-- Category Header -->
          <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
              {category}
            </h2>
            <div class="h-1 w-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full"></div>
          </div>

          <!-- Resources Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {groupedResources[category].map((resource) => (
              <div class="h-full animate-fade-in">
                <ResourceCard resource={resource} />
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-12 bg-gray-50 dark:bg-gray-800">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-4">
        Have a Tool to Recommend?
      </h2>
      <p class="text-gray-600 dark:text-gray-300 mb-6">
        Know a great tool or service that should be on this list? Let us know!
      </p>
      <a
        href="/contact"
        class="inline-flex items-center justify-center px-6 py-3 text-base font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-lg transition-all duration-300 transform hover:-translate-y-0.5 shadow-sm hover:shadow-md"
      >
        Get in Touch
      </a>
    </div>
  </section>
</Layout>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.6s ease-out forwards;
  }

  /* Stagger animation for grid items */
  .grid > .animate-fade-in:nth-child(1) {
    animation-delay: 0.1s;
  }
  .grid > .animate-fade-in:nth-child(2) {
    animation-delay: 0.2s;
  }
  .grid > .animate-fade-in:nth-child(3) {
    animation-delay: 0.3s;
  }
  .grid > .animate-fade-in:nth-child(4) {
    animation-delay: 0.4s;
  }
  .grid > .animate-fade-in:nth-child(5) {
    animation-delay: 0.5s;
  }
  .grid > .animate-fade-in:nth-child(6) {
    animation-delay: 0.6s;
  }
</style>
