---
date: 2025-11-24T00:00:00Z
title: "How to Self-Host Convex with Dokploy or Docker Compose"
description: "Learn how to self-host Convex database platform using Dokploy or Docker Compose. Complete guide with production-ready configurations."
image: "../../assets/images/25/11/convex-self-host.svg"
categories: ["vps"]
authors: ["Dragos"]
tags: ["self-hosted", "convex", "dokploy"]
canonical: "https://www.bitdoze.com/convex-self-host-dokploy-docker/"
---

Convex is a modern backend platform that provides a reactive database, serverless functions, and easy real-time updates. While their cloud offering is fantastic, self-hosting Convex gives you complete control over your data and infrastructure. This guide will show you how to deploy Convex on your own server using Dokploy or Docker Compose.

If you want to explore Convex features and their managed cloud options, check out the link below:

<Button link="https://go.bitdoze.com/convex" text="Check Convex Features & Free Plan" />

## Why Self-Host Convex?

Self-hosting allows you to:
<ListCheck>
- Keep full ownership of your data
- Run your backend on your own infrastructure or VPS
- Avoid limits of the free tier for personal projects
- Customize the environment and database backend (SQLite, Postgres, MySQL)
</ListCheck>

## Prerequisites

Before we begin, make sure you have:

- **A VPS**: You need a server to host your applications.
- **Dokploy Installed**: If you choose the Dokploy method, ensure you have it installed. Check our [Dokploy Install Guide](https://www.bitdoze.com/dokploy-install/) and [Dokploy Backups Guide](https://www.bitdoze.com/dokploy-backups-cloudflare-r2/) for reference.
- **Docker & Docker Compose**: If you prefer the manual method, ensure Docker is installed on your server.

## Deploy Convex with Dokploy

Dokploy makes it easy to deploy applications using Docker Compose directly from your browser. We will cover two scenarios: a simplified setup using the default SQLite and a production-ready setup using PostgreSQL.

### Option 1: Simplified Setup (SQLite)

This setup is great for testing or small projects. It uses the default SQLite database included in the Convex backend container.

1.  **Create a Project**: In Dokploy, create a new project (e.g., `convex-app`).
2.  **Create a Service**: Choose "Compose" and give it a name.
3.  **Paste Configuration**: Use the following `docker-compose.yml` content:

```yaml
services:
  backend:
    image: ghcr.io/get-convex/convex-backend:latest
    ports:
      - "3210:3210"
      - "3211:3211"
    volumes:
      - convex-data:/convex/data
    environment:
      - INSTANCE_NAME=convex-self-hosted
      - INSTANCE_SECRET=supersecretkey123  # Change this!
      - CONVEX_CLOUD_ORIGIN=https://convex-api.yourdomain.com
      - CONVEX_SITE_ORIGIN=https://convex-site.yourdomain.com
      - PORT=3210
      - SITE_PROXY_PORT=3211
    healthcheck:
      test: curl -f http://localhost:3210/version
      interval: 5s
      start_period: 5s

  dashboard:
    image: ghcr.io/get-convex/convex-dashboard:latest
    ports:
      - "6791:6791"
    environment:
      - NEXT_PUBLIC_DEPLOYMENT_URL=https://convex-api.yourdomain.com
    depends_on:
      backend:
        condition: service_healthy

volumes:
  convex-data:
```

4.  **Environment Variables**:
    *   `INSTANCE_SECRET`: A generic 32-byte hex string. You can generate one with `openssl rand -hex 32`.
    *   `CONVEX_CLOUD_ORIGIN`: The URL where your backend API will be accessible (e.g., `https://api.convex.bitdoze.com`).
    *   `CONVEX_SITE_ORIGIN`: The URL for HTTP actions (e.g., `https://site.convex.bitdoze.com`).
    *   `NEXT_PUBLIC_DEPLOYMENT_URL`: Must match `CONVEX_CLOUD_ORIGIN`.

5.  **Domains**: In Dokploy, set up the domains for your services. You will need to map your domains (e.g., `api.convex.yourdomain.com` and `dashboard.convex.yourdomain.com`) to the internal ports (`3210`, `3211`, `6791`) via Dokploy's domain management.

### Option 2: Advanced Setup (PostgreSQL)

For production, it is recommended to use PostgreSQL. This setup includes a Postgres database service.

**Compose Configuration:**

```yaml
services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_USER: convex
      POSTGRES_PASSWORD: dbpassword123 # Change this!
      POSTGRES_DB: convex_self_hosted
    volumes:
      - postgres-data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U convex"]
      interval: 5s
      timeout: 5s
      retries: 5

  backend:
    image: ghcr.io/get-convex/convex-backend:latest
    ports:
      - "3210:3210"
      - "3211:3211"
    volumes:
      - convex-data:/convex/data
    environment:
      - INSTANCE_NAME=convex-self-hosted
      - INSTANCE_SECRET=supersecretkey123 # Change this!
      - CONVEX_CLOUD_ORIGIN=https://convex-api.yourdomain.com
      - CONVEX_SITE_ORIGIN=https://convex-site.yourdomain.com
      - POSTGRES_URL=postgresql://convex:dbpassword123@postgres:5432?sslmode=disable
      - DO_NOT_REQUIRE_SSL=1
      - PORT=3210
      - SITE_PROXY_PORT=3211
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: curl -f http://localhost:3210/version
      interval: 5s
      start_period: 5s

  dashboard:
    image: ghcr.io/get-convex/convex-dashboard:latest
    ports:
      - "6791:6791"
    environment:
      - NEXT_PUBLIC_DEPLOYMENT_URL=https://convex-api.yourdomain.com
    depends_on:
      backend:
        condition: service_healthy

volumes:
  convex-data:
  postgres-data:
```

**Key Environment Variables:**

- `POSTGRES_URL`: Connection string for the Postgres database. Note `sslmode=disable` and `DO_NOT_REQUIRE_SSL=1` are used for internal Docker network communication.
- `INSTANCE_SECRET`: This is the master key for your backend. Keep it safe.
- `CONVEX_CLOUD_ORIGIN`: The public URL of your Convex backend API.
- `NEXT_PUBLIC_DEPLOYMENT_URL`: Used by the dashboard to connect to the backend.

## Deploy with Docker Compose Only

If you are not using Dokploy, you can simply use Docker Compose on any VPS with Docker installed.

1.  Create a directory for your project: `mkdir convex-host && cd convex-host`
2.  Create a `docker-compose.yml` file with the content from the **Option 2** above.
3.  Create a `.env` file to store your secrets (optional, but recommended practice):

```bash
INSTANCE_SECRET=your_generated_secret_here
DB_PASSWORD=your_secure_db_password
DOMAIN_API=https://api.yourdomain.com
DOMAIN_SITE=https://site.yourdomain.com
```

4.  Update your `docker-compose.yml` to use these variables (`${INSTANCE_SECRET}`, etc.).
5.  Run `docker compose up -d`.

<Notice type="warning" title="Reverse Proxy">
When using Docker Compose manually, you need to set up a reverse proxy (like Nginx or Traefik) to handle SSL and route traffic from your domains to ports 3210 (API), 3211 (Site), and 6791 (Dashboard).
</Notice>

## Using Your Self-Hosted Convex

Once your instance is up and running, you need to configure your local development project to point to it.

1.  **Get the Admin Key**:
    Run the following command in your server terminal (inside the `convex-host` directory or via Dokploy console):

    ```bash
    docker compose exec backend ./generate_admin_key.sh
    ```

    Copy the output key.

2.  **Configure Local Project**:
    In your Convex project on your local machine, create or update `.env.local`:

    ```bash
    CONVEX_SELF_HOSTED_URL=https://convex-api.yourdomain.com
    CONVEX_SELF_HOSTED_ADMIN_KEY=your_admin_key_here
    ```

3.  **Run Convex Commands**:
    Now you can run your usual Convex commands targeting your self-hosted instance:

    ```bash
    npx convex dev
    ```

## Conclusion

Self-hosting Convex gives you the power of their reactive backend with the flexibility of your own infrastructure. Whether you use Dokploy for an easy management interface or plain Docker Compose, you can have a production-ready Convex instance up in minutes.

<Button link="https://go.bitdoze.com/convex" text="Start with Convex Today" />
